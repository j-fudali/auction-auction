<mat-card>
    <mat-card-header>
        <img mat-card-avatar [src]="userId === chat.id_creator ? user.avatar : creator.avatar">
        <h2 mat-card-title>{{userId === chat.id_creator ? user.username : creator.username}}</h2>
    </mat-card-header>
    <mat-card-content>
        <mat-list infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolledUp)="onScrollUp()">
            <mat-progress-bar color="accent"></mat-progress-bar>
            <mat-list-item  lines="6" *ngFor="let message of chat.result"
                [style.margin]="message.id_sender === userId ? 'auto 0 5px auto' : 'auto auto 5px 0'"
                [style.borderWidth]="message.id_sender === userId ? '1px' : '2px'"
                >
                <img *ngIf="message.images.length > 0 && message.images[0] != ''" [src]="message.images[0]">
                <h3 matListItemTitle>{{message.id_sender === user.id_user ? user.username : creator.username }}</h3>
                <p>{{message.content}}</p>
                <small class="createdAt">{{message.created_at + 'Z'| date}}</small>
            </mat-list-item>
        </mat-list>
    </mat-card-content>
    <mat-card-footer >
        <app-new-message-input #newMessage></app-new-message-input>
    </mat-card-footer>
</mat-card>